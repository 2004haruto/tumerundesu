# âœ… è©•ä¾¡ãƒ•ã‚©ãƒ«ãƒ€å¤‰æ›´å®Œäº†

## ğŸ“ å¤‰æ›´å†…å®¹

ã‚¼ãƒŸç ”ç©¶ç”¨ã®3ãƒ¢ãƒ¼ãƒ‰æ¯”è¼ƒå®Ÿé¨“ï¼ˆOpenCVå˜ä½“ãƒ»YOLOå˜ä½“ãƒ»ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ï¼‰ã§ä½¿ç”¨ã™ã‚‹ç”»åƒã‚’ã€**å…ƒç”»åƒï¼ˆtest_imagesï¼‰ã‹ã‚‰åˆ‡ã‚Šå–ã‚Šæ¸ˆã¿ç”»åƒï¼ˆtest_images_croppedï¼‰**ã«å¤‰æ›´ã—ã¾ã—ãŸã€‚

## ğŸ”§ ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«

### 1. ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ»ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´å†…å®¹ |
|---------|---------|
| `run_experiment.py` | `test_folder = "./test_images_cropped"` ã«å¤‰æ›´ |
| `research_cli.py` | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã‚’ `./test_images_cropped` ã«å¤‰æ›´ |
| `evaluator.py` | ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã®ãƒ•ã‚©ãƒ«ãƒ€ã‚’ `./test_images_cropped` ã«å¤‰æ›´ |

### 2. APIãƒ»è¨­å®š

| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´å†…å®¹ |
|---------|---------|
| `api_server.py` | è©•ä¾¡APIã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã‚’ç’°å¢ƒå¤‰æ•°çµŒç”±ã§è¨­å®š |
| `.env` | `EVALUATION_DEFAULT_FOLDER=./test_images_cropped` ã‚’è¿½åŠ  |
| `.env.example` | åŒä¸Š |

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### ãƒ‘ã‚¿ãƒ¼ãƒ³1: CLIã§å®Ÿé¨“å®Ÿè¡Œ

```powershell
cd c:\Projects\tumerundesu\backend\ai_research

# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§test_images_croppedã‚’ä½¿ç”¨
python research_cli.py

# ã¾ãŸã¯æ˜ç¤ºçš„ã«æŒ‡å®š
python research_cli.py --folder ./test_images_cropped
```

### ãƒ‘ã‚¿ãƒ¼ãƒ³2: å®Ÿé¨“ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ

```powershell
# run_experiment.pyã¯è‡ªå‹•çš„ã«test_images_croppedã‚’ä½¿ç”¨
python run_experiment.py
```

### ãƒ‘ã‚¿ãƒ¼ãƒ³3: APIçµŒç”±ã§è©•ä¾¡

```bash
# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼ˆtest_images_croppedã‚’ä½¿ç”¨ï¼‰
curl -X POST "http://localhost:8001/evaluate"

# ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚©ãƒ«ãƒ€ã‚’æŒ‡å®š
curl -X POST "http://localhost:8001/evaluate" \
  -H "Content-Type: application/json" \
  -d '{"folder_path": "./test_images_cropped"}'
```

### ãƒ‘ã‚¿ãƒ¼ãƒ³4: Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ç›´æ¥å®Ÿè¡Œ

```python
from detector import BentoBoxDetector
from evaluator import ModelEvaluator

detector = BentoBoxDetector(confidence_threshold=0.5)
evaluator = ModelEvaluator(detector)

# è‡ªå‹•çš„ã«test_images_croppedã‚’ä½¿ç”¨ï¼ˆè©•ä¾¡å™¨ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
summary = evaluator.evaluate_folder("./test_images_cropped")
print(summary)
```

## ğŸ“Š å®Ÿé¨“ã®æµã‚Œ

### ã‚¹ãƒ†ãƒƒãƒ—1: å…ƒç”»åƒã‚’åˆ‡ã‚Šå–ã‚‹

```powershell
# test_imageså†…ã®å…ƒç”»åƒã‚’test_images_croppedã«åˆ‡ã‚Šå–ã‚Š
python preprocess_images.py
```

å‡ºåŠ›ä¾‹:
```
ğŸ“ ./test_images å†…ã®ç”»åƒã‚’å‡¦ç†ã—ã¾ã™...
âœ… æˆåŠŸ: 10
âŒ å¤±æ•—: 0
ğŸ“¦ åˆè¨ˆ: 10
âœ… å‡¦ç†æ¸ˆã¿ç”»åƒ: ./test_images_cropped
```

### ã‚¹ãƒ†ãƒƒãƒ—2: 3ãƒ¢ãƒ¼ãƒ‰æ¯”è¼ƒå®Ÿé¨“

```powershell
# åˆ‡ã‚Šå–ã‚Šæ¸ˆã¿ç”»åƒã§3ãƒ¢ãƒ¼ãƒ‰æ¯”è¼ƒ
python research_cli.py
```

å‡ºåŠ›ä¾‹:
```
==================================================================
ğŸ”¬ å¼å½“ç®±æ¤œå‡ºAI - ç ”ç©¶ç”¨æ¯”è¼ƒå®Ÿé¨“ãƒ„ãƒ¼ãƒ«
==================================================================
ğŸ“Š 3ãƒ¢ãƒ¼ãƒ‰æ¯”è¼ƒ: OpenCVå˜ä½“ | YOLOå˜ä½“ | ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰
==================================================================

ğŸ“‹ STEP 1: å®Ÿé¨“ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ...
âœ… ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿: outputs/experiment_meta_20251107_123456.yaml

ğŸ”§ STEP 2: æ¤œå‡ºå™¨åˆæœŸåŒ–...
âœ… åˆæœŸåŒ–å®Œäº†

ğŸ” STEP 3: 3ãƒ¢ãƒ¼ãƒ‰æ¯”è¼ƒè©•ä¾¡é–‹å§‹...
----------------------------------------------------------------------
opencvãƒ¢ãƒ¼ãƒ‰ã§è©•ä¾¡é–‹å§‹ (10æš)
opencvãƒ¢ãƒ¼ãƒ‰è©•ä¾¡å®Œäº†
  æˆåŠŸç‡: 84.00%
  å¹³å‡æ¨è«–æ™‚é–“: 45.30ms
  å¹³å‡èª¤å·®: 12.50mm

yoloãƒ¢ãƒ¼ãƒ‰ã§è©•ä¾¡é–‹å§‹ (10æš)
yoloãƒ¢ãƒ¼ãƒ‰è©•ä¾¡å®Œäº†
  æˆåŠŸç‡: 92.00%
  å¹³å‡æ¨è«–æ™‚é–“: 120.70ms
  å¹³å‡èª¤å·®: 8.30mm

hybridãƒ¢ãƒ¼ãƒ‰ã§è©•ä¾¡é–‹å§‹ (10æš)
hybridãƒ¢ãƒ¼ãƒ‰è©•ä¾¡å®Œäº†
  æˆåŠŸç‡: 96.00%
  å¹³å‡æ¨è«–æ™‚é–“: 95.40ms
  å¹³å‡èª¤å·®: 6.10mm

==================================================================
ã€ãƒ¢ãƒ¼ãƒ‰æ¯”è¼ƒãƒ¬ãƒãƒ¼ãƒˆã€‘
==================================================================
ãƒ¢ãƒ¼ãƒ‰         æˆåŠŸç‡      å¹³å‡èª¤å·®(mm)    å¹³å‡æ™‚é–“(ms)    ä¿¡é ¼åº¦
----------------------------------------------------------------------
opencv          84.0%          12.50          45.30        0.70
yolo            92.0%           8.30         120.70        0.88
hybrid          96.0%           6.10          95.40        0.89
==================================================================

ã€ç·åˆè©•ä¾¡ã€‘
  æœ€é«˜ç²¾åº¦: hybrid (6.10mm)
  æœ€é«˜é€Ÿåº¦: opencv (45.30ms)
  æœ€é«˜æˆåŠŸç‡: hybrid (96.0%)
==================================================================
```

### ã‚¹ãƒ†ãƒƒãƒ—3: çµæœã®ç¢ºèª

```powershell
# ãƒ¡ãƒˆãƒªã‚¯ã‚¹CSVã‚’ç¢ºèª
cat outputs/metrics.csv

# ã‚°ãƒ©ãƒ•ã‚’ç¢ºèªï¼ˆPNGå½¢å¼ï¼‰
explorer outputs/visualizations
```

## ğŸ” ãªãœåˆ‡ã‚Šå–ã‚Šæ¸ˆã¿ç”»åƒã‚’ä½¿ã†ã®ã‹ï¼Ÿ

### Beforeï¼ˆtest_images - å…ƒç”»åƒï¼‰
- âŒ ç¸¦é•·ãƒ»æ¨ªé•·ã§ãŠå¼å½“ç®±ä»¥å¤–ã®é ˜åŸŸãŒå¤šã„
- âŒ ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã€å¸ƒã€ä½™ç™½ãªã©ãŒå«ã¾ã‚Œã‚‹
- âŒ AIæ¤œå‡ºã®ç²¾åº¦ãŒä½ä¸‹ã™ã‚‹å¯èƒ½æ€§
- âŒ å®Ÿé¨“çµæœã«ãƒã‚¤ã‚ºãŒæ··å…¥

### Afterï¼ˆtest_images_cropped - åˆ‡ã‚Šå–ã‚Šæ¸ˆã¿ï¼‰
- âœ… ãŠå¼å½“ç®±ãŒä¸­å¿ƒã«é…ç½®
- âœ… æœ€é©ãªã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”ï¼ˆ4:3ï¼‰
- âœ… ä½™è¨ˆãªèƒŒæ™¯ã‚’é™¤å»
- âœ… AIæ¤œå‡ºã®ç²¾åº¦å‘ä¸Š
- âœ… å®Ÿé¨“çµæœã®ä¿¡é ¼æ€§å‘ä¸Š

## ğŸ“‚ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
backend/ai_research/
â”œâ”€â”€ test_images/           # å…ƒç”»åƒï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‹ã‚‰é€ä¿¡ï¼‰
â”‚   â””â”€â”€ bento_1762523201397.jpg
â”œâ”€â”€ test_images_cropped/   # åˆ‡ã‚Šå–ã‚Šæ¸ˆã¿ç”»åƒï¼ˆç ”ç©¶ç”¨ï¼‰ â† å®Ÿé¨“ã§ä½¿ç”¨
â”‚   â””â”€â”€ bento_1762523201397.jpg
â””â”€â”€ outputs/               # å®Ÿé¨“çµæœ
    â”œâ”€â”€ metrics.csv        # 3ãƒ¢ãƒ¼ãƒ‰æ¯”è¼ƒãƒ¡ãƒˆãƒªã‚¯ã‚¹
    â”œâ”€â”€ evaluation_summary.json
    â”œâ”€â”€ logs/              # æ¤œå‡ºãƒ­ã‚°
    â””â”€â”€ visualizations/    # ã‚°ãƒ©ãƒ•ï¼ˆPNGï¼‰
        â”œâ”€â”€ accuracy_comparison.png
        â”œâ”€â”€ speed_comparison.png
        â””â”€â”€ success_rate_comparison.png
```

## ğŸ“ ã‚¼ãƒŸç™ºè¡¨ã§ã®ä½¿ç”¨ä¾‹

### ã‚¹ãƒ©ã‚¤ãƒ‰ç”¨ãƒ‡ãƒ¼ã‚¿

```powershell
# å®Ÿé¨“å®Ÿè¡Œ
python research_cli.py

# çµæœãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç™ºè¡¨è³‡æ–™ãƒ•ã‚©ãƒ«ãƒ€ã«ã‚³ãƒ”ãƒ¼
mkdir presentation_materials
cp outputs/metrics.csv presentation_materials/
cp outputs/visualizations/*.png presentation_materials/
cp outputs/experiment_meta*.yaml presentation_materials/
```

### æ¯”è¼ƒå®Ÿé¨“ãƒ¬ãƒãƒ¼ãƒˆ

å®Ÿé¨“æ¡ä»¶:
- **ç”»åƒæ•°**: 10æšï¼ˆåˆ‡ã‚Šå–ã‚Šæ¸ˆã¿ï¼‰
- **ãƒ¢ãƒ¼ãƒ‰**: OpenCVå˜ä½“ã€YOLOå˜ä½“ã€ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰
- **è©•ä¾¡æŒ‡æ¨™**: æˆåŠŸç‡ã€å¹³å‡èª¤å·®ã€æ¨è«–æ™‚é–“

çµæœ:
- **æœ€é«˜ç²¾åº¦**: ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ¢ãƒ¼ãƒ‰ï¼ˆèª¤å·®6.10mmï¼‰
- **æœ€é«˜é€Ÿåº¦**: OpenCVå˜ä½“ï¼ˆ45.30msï¼‰
- **æœ€é«˜æˆåŠŸç‡**: ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ¢ãƒ¼ãƒ‰ï¼ˆ96%ï¼‰

çµè«–:
- å®Ÿç”¨æ€§ã¨ç²¾åº¦ã®ãƒãƒ©ãƒ³ã‚¹ã‹ã‚‰ã€**ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ãƒ¢ãƒ¼ãƒ‰**ã‚’æœ¬ç•ªæ¡ç”¨

## ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. âœ… å…ƒç”»åƒã‚’åˆ‡ã‚Šå–ã‚Šï¼ˆ`python preprocess_images.py`ï¼‰
2. âœ… å®Ÿé¨“å®Ÿè¡Œï¼ˆ`python research_cli.py`ï¼‰
3. âœ… çµæœç¢ºèªï¼ˆ`outputs/`ãƒ•ã‚©ãƒ«ãƒ€ï¼‰
4. âœ… ã‚°ãƒ©ãƒ•ã‚’ã‚¹ãƒ©ã‚¤ãƒ‰ã«è¿½åŠ 
5. âœ… ç™ºè¡¨è³‡æ–™ä½œæˆ

---

**ã“ã‚Œã§ã€ã‚¼ãƒŸç ”ç©¶ç”¨ã®å®Ÿé¨“ã¯å…¨ã¦åˆ‡ã‚Šå–ã‚Šæ¸ˆã¿ç”»åƒã§å®Ÿè¡Œã•ã‚Œã¾ã™ï¼** ğŸ“ğŸ“Šâœ¨
